<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Note:  Not a real hard problem if you just use map and sort. But don’t do Leetcode just for doing it. The optimal way is to use OOP and create Tweet &amp; User class. User &amp;#123;userId, followees, twe">
<meta property="og:type" content="article">
<meta property="og:title" content="Leetcode 355 - Design twitter">
<meta property="og:url" content="http://example.com/2021/12/06/design-twitter/index.html">
<meta property="og:site_name" content="Barney&#39;s Blog">
<meta property="og:description" content="Note:  Not a real hard problem if you just use map and sort. But don’t do Leetcode just for doing it. The optimal way is to use OOP and create Tweet &amp; User class. User &amp;#123;userId, followees, twe">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-12-06T20:06:13.000Z">
<meta property="article:modified_time" content="2021-12-25T10:28:28.515Z">
<meta property="article:author" content="Barney">
<meta property="article:tag" content="hash table">
<meta property="article:tag" content="linked list">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico?">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Leetcode 355 - Design twitter</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" "Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/BarneyShi">Projects</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://barneyshi.github.io/portfolio/">Resume</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post " href="/2021/12/06/coloring-a-border/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post " href="/2021/12/06/verify-preorder-serialization-of-a-binary-tree/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top " href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post " href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2021/12/06/design-twitter/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2021/12/06/design-twitter/&text=Leetcode 355 - Design twitter"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2021/12/06/design-twitter/&title=Leetcode 355 - Design twitter"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2021/12/06/design-twitter/&is_video=false&description=Leetcode 355 - Design twitter"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Leetcode 355 - Design twitter&body=Check out this article: http://example.com/2021/12/06/design-twitter/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2021/12/06/design-twitter/&title=Leetcode 355 - Design twitter"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2021/12/06/design-twitter/&title=Leetcode 355 - Design twitter"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2021/12/06/design-twitter/&title=Leetcode 355 - Design twitter"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2021/12/06/design-twitter/&title=Leetcode 355 - Design twitter"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2021/12/06/design-twitter/&name=Leetcode 355 - Design twitter&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2021/12/06/design-twitter/&t=Leetcode 355 - Design twitter"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Leetcode 355 - Design twitter
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Barney</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-12-06T20:06:13.000Z" itemprop="datePublished">2021-12-06</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/hash-table/" rel="tag">hash table</a>, <a class="tag-link-link" href="/tags/linked-list/" rel="tag">linked list</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><strong><code>Note:</code></strong></p>
<ul>
<li>Not a real hard problem if you just use <code>map</code> and <code>sort</code>. But don’t do Leetcode just for doing it. The optimal way is to use <code>OOP</code> and create <code>Tweet</code> &amp; <code>User</code> class.</li>
<li><code>User &#123;userId, followees, tweets&#125;</code>.</li>
<li><code>Tweet &#123;userId, tweetId, time, next&#125;</code>. Tweets should <code>linked list</code> node. In this way, we can quickly <code>merge the first 10</code> nodes without wasting time.</li>
<li><code>Twitter &#123;time&#125;</code>. Starts with <code>0</code>, every time we create a new post, <code>increment time by 1</code>.</li>
<li>While merging <code>10</code> tweets, don’t make changes to the original <code>nodes</code>. We need to keep their original order. </li>
</ul>
<p><strong><code>Question:</code></strong></p>
<p>Design a simplified version of Twitter where users can post tweets, follow/unfollow another user, and is able to see the <code>10</code> most recent tweets in the user’s news feed.</p>
<p>Implement the <code>Twitter</code> class:</p>
<ul>
<li><code>Twitter()</code> Initializes your twitter object.</li>
<li><code>void postTweet(int userId, int tweetId)</code> Composes a new tweet with ID <code>tweetId</code> by the user userId. Each call to this function will be made with a unique <code>tweetId</code>.</li>
<li><code>List&lt;Integer&gt; getNewsFeed(int userId)</code> Retrieves the <code>10</code> most recent tweet IDs in the user’s news feed. Each item in the news feed must be posted by users who the user followed or by the user themself. Tweets must be ordered from most recent to least recent.</li>
<li><code>void follow(int followerId, int followeeId)</code> The user with ID <code>followerId</code> started following the user with ID <code>followeeId</code>.</li>
<li><code>void unfollow(int followerId, int followeeId)</code> The user with ID <code>followerId</code> started unfollowing the user with ID <code>followeeId</code>.</li>
</ul>
<p><strong><code>Example:</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Input</span><br><span class="line">[&quot;Twitter&quot;, &quot;postTweet&quot;, &quot;getNewsFeed&quot;, &quot;follow&quot;, &quot;postTweet&quot;, &quot;getNewsFeed&quot;, &quot;unfollow&quot;, &quot;getNewsFeed&quot;]</span><br><span class="line">[[], [1, 5], [1], [1, 2], [2, 6], [1], [1, 2], [1]]</span><br><span class="line">Output</span><br><span class="line">[null, null, [5], null, null, [6, 5], null, [5]]</span><br><span class="line"></span><br><span class="line">Explanation</span><br><span class="line">Twitter twitter = new Twitter();</span><br><span class="line">twitter.postTweet(1, 5); // User 1 posts a new tweet (id = 5).</span><br><span class="line">twitter.getNewsFeed(1);  // User 1&#x27;s news feed should return a list with 1 tweet id -&gt; [5]. return [5]</span><br><span class="line">twitter.follow(1, 2);    // User 1 follows user 2.</span><br><span class="line">twitter.postTweet(2, 6); // User 2 posts a new tweet (id = 6).</span><br><span class="line">twitter.getNewsFeed(1);  // User 1&#x27;s news feed should return a list with 2 tweet ids -&gt; [6, 5]. Tweet id 6 should precede tweet id 5 because it is posted after tweet id 5.</span><br><span class="line">twitter.unfollow(1, 2);  // User 1 unfollows user 2.</span><br><span class="line">twitter.getNewsFeed(1);  // User 1&#x27;s news feed should return a list with 1 tweet id -&gt; [5], since user 1 is no longer following user 2.</span><br></pre></td></tr></table></figure>

<p><strong><code>Code:</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MAX_TWEETS = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Twitter = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.time = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">this</span>.userMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Tweet = <span class="function"><span class="keyword">function</span> (<span class="params">userId = <span class="literal">null</span>, tweetId = <span class="literal">null</span>, time = <span class="number">0</span>, next = <span class="literal">null</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.userId = userId;</span><br><span class="line">  <span class="built_in">this</span>.tweetId = tweetId;</span><br><span class="line">  <span class="built_in">this</span>.time = time;</span><br><span class="line">  <span class="built_in">this</span>.next = next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> User = <span class="function"><span class="keyword">function</span> (<span class="params">userId = <span class="literal">null</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.userId = userId;</span><br><span class="line">  <span class="built_in">this</span>.followees = <span class="keyword">new</span> <span class="built_in">Set</span>([userId]);</span><br><span class="line">  <span class="built_in">this</span>.tweets = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>userId </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">tweetId</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;void&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Twitter.prototype.postTweet = <span class="function"><span class="keyword">function</span>(<span class="params">userId, tweetId</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> timestamp = <span class="built_in">this</span>.time;</span><br><span class="line">  <span class="built_in">this</span>.time++;</span><br><span class="line">  <span class="keyword">let</span> user = <span class="built_in">this</span>.userMap.get(userId);</span><br><span class="line">  <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">    user = <span class="keyword">new</span> User(userId);</span><br><span class="line">    <span class="built_in">this</span>.userMap.set(userId, user);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> newTweet = <span class="keyword">new</span> Tweet(userId, tweetId, timestamp);</span><br><span class="line">  <span class="built_in">this</span>.appendTweet(user, newTweet);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">userId</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Twitter.prototype.getNewsFeed = <span class="function"><span class="keyword">function</span>(<span class="params">userId</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">this</span>.userMap.has(userId)) &#123;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">new</span> User(userId);</span><br><span class="line">    <span class="built_in">this</span>.userMap.set(userId, user);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> kTweetLists = [];</span><br><span class="line">  <span class="keyword">let</span> followees = <span class="built_in">Array</span>.from(<span class="built_in">this</span>.userMap.get(userId).followees);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; followees.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.userMap.get(followees[i])) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">const</span> tweets = <span class="built_in">this</span>.userMap.get(followees[i]).tweets</span><br><span class="line">    tweets &amp;&amp; kTweetLists.push(tweets);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> merged = <span class="built_in">this</span>.mergeKLists(kTweetLists, <span class="number">0</span>, kTweetLists.length - <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">let</span> p = merged;</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; p &amp;&amp; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    res.push(p.tweetId);</span><br><span class="line">    p = p.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>followerId </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">followeeId</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;void&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Twitter.prototype.follow = <span class="function"><span class="keyword">function</span>(<span class="params">followerId, followeeId</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">this</span>.userMap.has(followerId)) &#123;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">new</span> User(followerId);</span><br><span class="line">    <span class="built_in">this</span>.userMap.set(followerId, user);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.userMap.get(followerId).followees.add(followeeId);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>followerId </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">followeeId</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;void&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Twitter.prototype.unfollow = <span class="function"><span class="keyword">function</span>(<span class="params">followerId, followeeId</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">this</span>.userMap.has(followerId)) &#123;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">new</span> User(followerId);</span><br><span class="line">    <span class="built_in">this</span>.userMap.set(followerId, user);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.userMap.get(followerId).followees.delete(followeeId);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Twitter.prototype.appendTweet = <span class="function"><span class="keyword">function</span> (<span class="params">user, tweet</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> tweets = user.tweets;</span><br><span class="line">  <span class="keyword">if</span> (tweets === <span class="literal">null</span>) &#123;</span><br><span class="line">    user.tweets = tweet;</span><br><span class="line">    <span class="keyword">return</span>; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> tmp = tweets;</span><br><span class="line">  user.tweets = tweet;</span><br><span class="line">  tweet.next = tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Twitter.prototype.mergeKLists = <span class="function"><span class="keyword">function</span> (<span class="params">lists, left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (left === right) <span class="keyword">return</span> lists[left];</span><br><span class="line">  <span class="keyword">if</span> (left &gt; right) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">const</span> mid = (left + right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> merge(<span class="built_in">this</span>.mergeKLists(lists, left, mid), <span class="built_in">this</span>.mergeKLists(lists, mid + <span class="number">1</span>, right));</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params">list1, list2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> dummy = <span class="keyword">new</span> Tweet();</span><br><span class="line">    <span class="keyword">let</span> p1 = list1, p2 = list2;</span><br><span class="line">    <span class="keyword">let</span> tmp = dummy;</span><br><span class="line">    <span class="keyword">while</span> (p1 &amp;&amp; p2) &#123;</span><br><span class="line">      <span class="keyword">if</span> (p1.time &gt; p2.time) &#123;</span><br><span class="line">        <span class="keyword">const</span> next = <span class="keyword">new</span> Tweet(p1.userId, p1.tweetId, p1.time);</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        tmp.next = next;</span><br><span class="line">        count++;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> next = <span class="keyword">new</span> Tweet(p2.userId, p2.tweetId, p2.time);</span><br><span class="line">        p2 = p2.next;</span><br><span class="line">        tmp.next = next;</span><br><span class="line">        count++;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (count === MAX_TWEETS) <span class="keyword">return</span> dummy.next;</span><br><span class="line">      tmp = tmp.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (p1) &#123;</span><br><span class="line">      tmp.next = p1;</span><br><span class="line">      p1 = p1.next;</span><br><span class="line">      tmp = tmp.next;</span><br><span class="line">      count++;</span><br><span class="line">      <span class="keyword">if</span> (count === MAX_TWEETS) <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (p2) &#123;</span><br><span class="line">      tmp.next = p2;</span><br><span class="line">      p2 = p2.next;</span><br><span class="line">      tmp = tmp.next;</span><br><span class="line">      count++;</span><br><span class="line">      <span class="keyword">if</span> (count === MAX_TWEETS) <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your Twitter object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * var obj = new Twitter()</span></span><br><span class="line"><span class="comment"> * obj.postTweet(userId,tweetId)</span></span><br><span class="line"><span class="comment"> * var param_2 = obj.getNewsFeed(userId)</span></span><br><span class="line"><span class="comment"> * obj.follow(followerId,followeeId)</span></span><br><span class="line"><span class="comment"> * obj.unfollow(followerId,followeeId)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/BarneyShi">Projects</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://barneyshi.github.io/portfolio/">Resume</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2021/12/06/design-twitter/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2021/12/06/design-twitter/&text=Leetcode 355 - Design twitter"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2021/12/06/design-twitter/&title=Leetcode 355 - Design twitter"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2021/12/06/design-twitter/&is_video=false&description=Leetcode 355 - Design twitter"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Leetcode 355 - Design twitter&body=Check out this article: http://example.com/2021/12/06/design-twitter/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2021/12/06/design-twitter/&title=Leetcode 355 - Design twitter"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2021/12/06/design-twitter/&title=Leetcode 355 - Design twitter"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2021/12/06/design-twitter/&title=Leetcode 355 - Design twitter"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2021/12/06/design-twitter/&title=Leetcode 355 - Design twitter"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2021/12/06/design-twitter/&name=Leetcode 355 - Design twitter&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2021/12/06/design-twitter/&t=Leetcode 355 - Design twitter"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2021
    Barney
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/BarneyShi">Projects</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://barneyshi.github.io/portfolio/">Resume</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KEDM4XH56M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-KEDM4XH56M');
    </script>

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
